#include<stdio.h>
int main()
{
   static long long int a,n,m,k,i,j,l,x,y=1,dec,d[1000001][3],c[1000000][2],z,maxi,mini,avg;
   char s[1000001],ch,op,ch1,ch2;
   scanf("%lld%lld",&n,&m);
   scanf("%lld",&d[1][0]);
   d[1][1]=1;
   d[1][2]=1;
   a=(n*(n+1))/2;
   a=a%2;
   for(i=1;i<n;i++)
   {
       scanf("%lld",&x);
       if(d[y][0]<=x)
       {
           dec=1;
           d[y][1]=d[y][1]%2;
           d[y][2]=d[y][2]%2;
           for(j=l-1;j>=0 && c[j][0]>d[y][0];j--)
           {
               c[j+1][0]=c[j][0];
               c[j+1][1]=c[j][1];
           }
           c[j+1][0]=d[y][0];    
           c[j+1][1]=d[y][1]*d[y][2];
           l++;
           dec+=d[y][1];
           if(y>1)
               d[y-1][2]+=d[y][2];
           while(y>1 && d[y-1][0]<=x)
           {
               y--;
               d[y][1]=d[y][1]%2;
               d[y][2]=d[y][2]%2;
                   for(j=l-1;j>=0 && c[j][0]>d[y][0];j--)
                   {
                       c[j+1][0]=c[j][0];
                       c[j+1][1]=c[j][1];
                   }
                   c[j+1][0]=d[y][0];    
                   c[j+1][1]=d[y][1]*d[y][2];
                   l++;
               dec+=d[y][1];
               if(y>1)
                   d[y-1][2]+=d[y][2];
           }
           d[y][0]=x;
           d[y][1]=dec;
           d[y][2]=1;
       }
       else
       {
           y++;
           d[y][0]=x;
           d[y][1]=d[y][2]=1;
       }
   }
   for(i=y;i>=1;i--)
   {
       d[i][1]=d[i][1]%2;
       d[i][2]=d[i][2]%2;
           for(j=l-1;j>=0 && c[j][0]>d[i][0];j--)
           {
               c[j+1][0]=c[j][0];
               c[j+1][1]=c[j][1];
           }
           c[j+1][0]=d[i][0];    
           c[j+1][1]=d[i][1]*d[i][2];
           l++;
       d[i-1][2]+=d[i][2];
   }
   for(i=l-2;i>=0;i--)
   {
       c[i][1]+=c[i+1][1];
       if(c[i][0]==c[i+1][0])
           c[i+1][0]=0;
   }
   for(i=1,j=1;i<l;i++)
   {
       if(c[i][0])
       {
           c[j][0]=c[i][0];
           c[j][1]=c[i][1];
           j++;
       }
   }
   l=j;
       y=c[l-1][0];
   for(j=0;j<m;j++)
   {
       scanf("%c%c%lld%c%c",&ch1,&op,&k,&ch2,&ch);
       if(op=='>')
       {
           if(k>=y)
               z=0;
           else
           {
               maxi=l-1;
               mini=0;
           while((maxi-mini)>10)
           {
               avg=(maxi+mini)/2;
               if(c[avg][0]>k)
               {
                   maxi=avg;
               }
               else if(c[avg][0]<k)
               {
                   mini=avg;
               }
               else
               {
                   mini=avg;
                   break;
               }
           }
           for(i=mini;i<=maxi;i++)
           {
               if(c[i][0]>k)
               {
                   z=c[i][1];
                   break;
               }
           }
           }
       }
       else if(op=='<')
       {
           k--;
           if(k>=y)
               z=0;
           else
           {
               maxi=l-1;
               mini=0;
           while((maxi-mini)>10)
           {
               avg=(maxi+mini)/2;
               if(c[avg][0]>k)
               {
                   maxi=avg;
               }
               else if(c[avg][0]<k)
               {
                   mini=avg;
               }
               else
               {
                   mini=avg;
                   break;
               }
           }
           for(i=mini;i<=maxi;i++)
           {
               if(c[i][0]>k)
               {
                   z=c[i][1];
                   break;
               }
           }
 
           }
           z=a-z;
       }
       else
       {
           z=0;
           x=k-1;
           if(k>y)
               z=0;
           else
           {
               maxi=l-1;
               mini=0;
           while((maxi-mini)>10)
           {
               avg=(maxi+mini)/2;
               if(c[avg][0]>k)
               {
                   maxi=avg;
               }
               else if(c[avg][0]<k)
               {
                   mini=avg;
               }
               else
               {
                   mini=avg-1;
                   break;
               }
           }
           for(i=mini;i<=maxi;i++)
           {
               if(c[i][0]>k)
               {
                   z=c[i][1];
                   break;
               }
           }
           k--;
           for(i=mini;i<=maxi;i++)
           {
               if(c[i][0]>k)
               {
                   z=c[i][1]-z;
                   break;
               }
           }
           }
       }
       z=z%2;
       if(z)
           s[j]=ch;
       else
       {
            if(ch=='D')
                s[j]='C';
            else
                s[j]='D';
       }
   }
   s[j]='\0';
   printf("%s",s);
   return 0;
}
 